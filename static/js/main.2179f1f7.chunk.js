(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(29),s=n.n(c),i=(n(83),n(21)),l=n(22),u=n(24),p=n(23),d=n(25),f=n(144),h=n(145),m=n(76),y=n(4),b=n.n(y),v=n(11),g=n(143),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{marginTop:"1rem",lineHeight:"0.5rem"},className:"menu"},this.props.options.map(function(t){return o.a.createElement("p",{key:t.id,style:{fontSize:e.props.options.length>5?"1rem":"2rem",textOverflow:"hidden"}},t.id==e.props.selected?o.a.createElement("b",null,t.label):t.label)}))}}]),t}(r.Component),w=(n(86),n(87),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={token:null,deviceId:null,selected:1,menu:null,library:[]},n.setupPlayer=function(e){return window.onSpotifyWebPlaybackSDKReady=function(){(a=new Spotify.Player({name:"Get in the Zune",getOAuthToken:function(t){t(e)}})).addListener("initialization_error",function(e){var t=e.message;console.error(t)}),a.addListener("authentication_error",function(e){var t=e.message;console.error(t)}),a.addListener("account_error",function(e){var t=e.message;console.error(t)}),a.addListener("playback_error",function(e){var t=e.message;console.error(t)}),a.addListener("player_state_changed",function(e){console.log(e)}),a.addListener("ready",function(e){var t=e.device_id;n.setState({deviceId:t}),console.log("Ready with Device ID",t),n.initPlay()}),a.addListener("not_ready",function(e){var t=e.device_id;console.log("Device ID has gone offline",t)}),a.connect()},a},n.authUrl=function(){var e="streaming user-read-birthdate user-read-email user-read-private user-read-currently-playing user-read-playback-state user-read-recently-played user-modify-playback-state playlist-read-private user-library-read";return"https://accounts.spotify.com/authorize?response_type=token&client_id=fae22fc460a642acab61b10f6cc1cb77&scope="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent("http://localhost:3000/")},n.initPlay=Object(v.a)(b.a.mark(function e(){var t,r,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/me/player/recently-played",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.state.token)}});case 2:if(200!==(t=e.sent).status){e.next=17;break}return e.next=6,t.json();case 6:return r=e.sent,console.log(r.items[0]),e.next=10,n.getAlbumTracks(r.items[0].track.album.id);case 10:return o=e.sent,e.next=13,fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(n.state.deviceId),{method:"PUT",body:JSON.stringify({uris:o.map(function(e){return e.uri})}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.state.token)}});case 13:return e.next=15,setTimeout(Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentState();case 2:(t=e.sent)&&!t.paused&&n.togglePlayer(a);case 4:case"end":return e.stop()}},e,this)})),525);case 15:e.next=18;break;case 17:console.log("aslkdlaksjdfhlkajshdflkajshdfl");case 18:case"end":return e.stop()}},e,this)})),n.nextTrack=function(e){e.nextTrack(),console.log("Skipped to next track!")},n.prevTrack=function(e){e.previousTrack(),console.log("Set to previous track!")},n.pausePlayback=function(e){e.pause(),console.log("Pausing track")},n.togglePlayer=function(e){e.togglePlay()},n.getAlbumTracks=function(){var e=Object(v.a)(b.a.mark(function e(t){var a,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/albums/".concat(t,"/tracks"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(n.state.token)})});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,console.log("TRACKS"),console.log(r.items),e.abrupt("return",r.items);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getLibrary=Object(v.a)(b.a.mark(function e(){var t,a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/me/tracks?offset=0&limit=50",{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(n.state.token)})});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,console.log(a.items),e.abrupt("return",a.items);case 8:case"end":return e.stop()}},e,this)})),n.getPlaylists=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/me/playlists",{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(n.state.token)})});case 2:return t=e.sent,e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),n.getPlaylistIcon=function(){var e=Object(v.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/me/playlists".concat(t,"/images"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(n.state.token)})});case 2:return a=e.sent,e.next=5,a;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({token:this.props.location.hash?this.props.location.hash.split("=")[1]:null});case 2:if(console.log(this.props.location),!this.props.location.hash.split("=")[1]){e.next=10;break}return e.next=6,this.setupPlayer(this.props.location.hash.split("=")[1]);case 6:return e.next=8,this.getLibrary();case 8:t=e.sent,this.setState({library:t.map(function(e,t){return Object(m.a)({},e,{index:t,label:e.track.name})})});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.menu,r=t.selected,c=o.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("img",{height:"200",src:"./zune.svg"}),o.a.createElement(g.a,{style:{marginTop:"1rem",backgroundColor:"#1ed760"},type:"primary",href:this.authUrl()},o.a.createElement("i",{style:{marginRight:"1rem"},className:"fab fa-spotify"}),"Login")),s=[{label:"music",id:1,options:this.state.library},{label:"playlists",id:2}],i=function(){return 1===n?s[0].options:s};return o.a.createElement("div",{className:"background"},o.a.createElement("div",{className:"Zune"},o.a.createElement("div",{className:"border"},o.a.createElement("div",{className:"screen"},!this.state.token&&c,this.state.token&&o.a.createElement(k,{options:i(),selected:this.state.selected}))),o.a.createElement("div",{style:{marginBottom:"1rem"},className:"controls"},o.a.createElement("button",{type:"button",onClick:function(){e.setState({menu:null,selected:1})},className:"control back"},o.a.createElement("i",{className:"fas fa-arrow-left"})),o.a.createElement("div",{style:{flexDirection:"column"},className:"control wheel"},o.a.createElement("button",{type:"button",onClick:function(){e.setState({selected:Math.max(e.state.selected-1,1)})},className:"directonal"},"."),o.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly"}},o.a.createElement("button",{type:"button",onClick:function(){e.prevTrack(a)},className:"directonal"},"."),o.a.createElement("button",{style:{},type:"button",onClick:function(){e.setState({menu:r}),console.log("Selected option ".concat(r," with value ").concat(s[r-1].label,", ").concat(s[r-1].options))},className:"directonal"},"."),o.a.createElement("button",{type:"button",onClick:function(){e.nextTrack(a)},className:"directonal"},".")),o.a.createElement("button",{type:"button",onClick:function(){e.setState({selected:Math.min(e.state.selected+1,i().length)})},className:"directonal"},".")),o.a.createElement("button",{type:"button",onClick:function(){e.togglePlayer(a)},className:"control toggle"},o.a.createElement("i",{className:"fas fa-play"})))))}}]),t}(r.Component)),x=(n(136),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(f.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:w}))}}]),t}(r.Component)),j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(o.a.createElement(x,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/zune-simulator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/zune-simulator","/service-worker.js");j?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):E(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):E(t,e)})}}()},78:function(e,t,n){e.exports=n(140)},83:function(e,t,n){},87:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.2179f1f7.chunk.js.map